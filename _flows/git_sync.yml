id: git_sync
namespace: company

inputs:
  - id: branch
    type: STRING
    defaults: develop

tasks:
  - id: sync
    type: io.kestra.plugin.git.SyncFlows
    targetNamespace: "{{flow.namespace}}"
    includeChildNamespaces: true
    url: https://github.com/paulgrainger85/kestra
    branch: "{{inputs.branch}}"
    username: "{{secret('git_username')}}"
    password: "{{secret('git_token')}}"
  - id: sync_namespace_files
    type: io.kestra.plugin.git.SyncNamespaceFiles
    url: https://github.com/paulgrainger85/kestra
    gitDirectory: python
    branch: "{{inputs.branch}}"
    username: "{{secret('git_username')}}"
    password: "{{secret('git_token')}}"